<!doctype html>
<html lang="en">

<head>
  <title>barchart</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS v5.0.2 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<style>
  #myChart {
    background: url('./20220223/123.png');
    background-repeat: no-repeat;
    background-position: top right;
    background-size: contain;
  }
</style>
</head>

<body>
  <canvas id="myChart"></canvas>
  <!-- <canvas id="myChart" width="800" height="600"></canvas> -->

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
   
let originaldata =[
  {
    "構造別": "鋼骨造",
    "代號": "P",
    "折舊率": "0.01",
    "耐用年數-年": "60",
    "殘值率": "0.4"
  },
  {
    "構造別": "鋼骨混凝土造",
    "代號": "A",
    "折舊率": "0.01",
    "耐用年數-年": "60",
    "殘值率": "0.4"
  },
  {
    "構造別": "鋼骨鋼筋混凝土造",
    "代號": "S",
    "折舊率": "0.01",
    "耐用年數-年": "60",
    "殘值率": "0.4"
  },
  {
    "構造別": "鋼筋混凝土造",
    "代號": "B",
    "折舊率": "0.01",
    "耐用年數-年": "60",
    "殘值率": "0.4"
  },
  {
    "構造別": "預鑄混凝土造",
    "代號": "T",
    "折舊率": "0.01",
    "耐用年數-年": "60",
    "殘值率": "0.4"
  },
  {
    "構造別": "加強磚造",
    "代號": "C",
    "折舊率": "0.012",
    "耐用年數-年": "52",
    "殘值率": "0.376"
  },
  {
    "構造別": "鋼鐵造",
    "代號": "U",
    "折舊率": "0.012",
    "耐用年數-年": "52",
    "殘值率": "0.376"
  },
  {
    "構造別": "鋼鐵造",
    "代號": "J",
    "折舊率": "0.012",
    "耐用年數-年": "52",
    "殘值率": "0.376"
  },
  {
    "構造別": "木石磚造/咾砧石造",
    "代號": "G",
    "折舊率": "0.014",
    "耐用年數-年": "46",
    "殘值率": "0.356"
  },
  {
    "構造別": "木石磚造/石造",
    "代號": "H",
    "折舊率": "0.013",
    "耐用年數-年": "50",
    "殘值率": "0.35"
  },
  {
    "構造別": "木石磚造/雜木以外",
    "代號": "D",
    "折舊率": "0.02",
    "耐用年數-年": "35",
    "殘值率": "0.3"
  },
  {
    "構造別": "木石磚造/雜木",
    "代號": "E",
    "折舊率": "0.025",
    "耐用年數-年": "30",
    "殘值率": "0.25"
  },
  {
    "構造別": "木石磚造/磚造",
    "代號": "F",
    "折舊率": "0.014",
    "耐用年數-年": "46",
    "殘值率": "0.356"
  },
  {
    "構造別": "土竹造/竹造",
    "代號": "L",
    "折舊率": "0.08",
    "耐用年數-年": "11",
    "殘值率": "0.12"
  },
  {
    "構造別": "土竹造/竹造",
    "代號": "K",
    "折舊率": "0.03",
    "耐用年數-年": "30",
    "殘值率": "0.1"
  },
  {
    "構造別": "土竹造/純土造",
    "代號": "R",
    "折舊率": "0.05",
    "耐用年數-年": "18",
    "殘值率": "0.1"
  },
  {
    "構造別": "冷氣機",
    "代號": "M",
    "折舊率": "0.0715",
    "耐用年數-年": "13",
    "殘值率": "0.0705"
  },
  {
    "構造別": "升降機",
    "代號": "N",
    "折舊率": "0.0555",
    "耐用年數-年": "17",
    "殘值率": "0.0565"
  },
  {
    "構造別": "充氣膜造",
    "代號": "I",
    "折舊率": "0.06",
    "耐用年數-年": "15",
    "殘值率": "0.1"
  },
  {
    "構造別": "腐蝕性金屬類儲存槽地下油槽",
    "代號": "O",
    "折舊率": "0.0375",
    "耐用年數-年": "20",
    "殘值率": "0.25"
  }
]
let dataContent=originaldata.map
(function(item){
  let newItem={
    x:item["折舊率"],
    y:item["耐用年數-年"],
  }
  return newItem
})
console.log(dataContent)
var ctx = document.getElementById('myChart');
// var ctx= getcontent(2d);
const myChadart=new Chart(ctx, {

  //     labels: [
  //   'January',
  //   'February',
  //   'March',
  //   'April'
  // ],
data: {
  datasets: [{
    type: 'bar',
    label: '殘值率',
    data: dataContent,
    borderColor: 'rgb(255, 99, 132)',
    backgroundColor: [
      'rgba(255, 99, 132, 0.2)',
      'rgba(66, 33, 196, 0.3)',
      
    ]
  }, {
    type: 'line',
    label: '耐用年數-年',
    data:dataContent,
    fill: false,
    borderColor: 'orange',
    tension: 0.1,
    pointRadius: 10, //點變圈
    pointHoverRadius: 15 //圈圈大小
  }]

}
});
    const config = {
      type: 'line',
  data: dataContent,
  options: {
    maintainAspectRatio: false,
    scales: {
      y: {
        type: 'linear',
        display: true,
        position: 'left',
        title: {
          text: '%',
          display: true
        }
      },
      y1: {
        display: true,
        position: 'right',
        grid: {
          drawOnChartArea: false
        },
        title: {
          text: '年',
          display: true
        }
      }
    }
  }
};
    const myChart = new Chart(ctx, config);
  </script>
  <!-- Bootstrap JavaScript Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>

</body>

</html>
<!-- https://www.chartjs.org/docs/latest/charts/bar.html
條形圖（英語：bar chart），或 條圖（英語：bar graph），台灣常稱為 長條圖，又稱為 柱狀圖、棒形圖，是一種以長方形的長度為變量的統計圖表。長條圖用來比較兩個或以上的價值（不同時間或者不同條件），只有一個變量，通常利用於較小的數據集分析。長條圖亦可橫向排列，或用多維方式表達。 -->